#!/usr/bin/env bash

# If xinput is installed, change the sensitivity for some of the input
# methods. Note that the values of the properties are set for this system in
# particular. They might be different in another system.
if hash xinput 2>/dev/null; then
    # Check if touchpad is available.
    if udevadm info --export-db | grep ID_INPUT_TOUCHPAD=1 &>/dev/null; then
        # Try to increase the touchpad sensitivity. Fails quietly.
        # Find the id of the device that controls the touchpad. Here, where I set 'TouchPad', must be the unique part of
        # your device name that can be used to find its id.
        device_id=$(xinput | sed -n 's/^.*TouchPad.*id=\([0-9]*\).*/\1/p')
        # Find the id of the property that controls device deceleration.
        prop_id=$(xinput list-props $device_id | sed -n -r 's/^.*Device Accel Constant Deceleration \(([0-9]+)\).*/\1/p')
        # Set the property. Choose the value that most suit you.
        xinput set-prop $device_id $prop_id 8.0 &>/dev/null
    fi

    # Check if mouse is available.
    if udevadm info --export-db | grep ID_INPUT_MOUSE=1 &>/dev/null; then
        # Try to increase the mouse sensitivity. Fails quietly. For explanation about what the commands are doing
        # check the version above.
        device_id=$(xinput | sed -r -n 's/^.*Logitech.*M325.*id=([0-9]+).*/\1/p')
        prop_id=$(xinput list-props $device_id | sed -n -r 's/^.*Device Accel Constant Deceleration \(([0-9]+)\).*/\1/p')
        xinput set-prop $device_id $prop_id 3.0 &>/dev/null
    fi
fi
